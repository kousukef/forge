# project-specific-config 提案書

## 意図（Intent）

Forge は現在 Next.js/Prisma/Terraform スタックに特化しており、異なる技術スタック（例: BigQuery ETL基盤）のプロジェクトでは不要なドメインスキル・エージェント・リファレンスがノイズになる。共通で使える部分とプロジェクト固有の部分を分離し、複数プロジェクトを同じ日に行き来しても手動切り替えなしで適切な設定が適用される仕組みを作る。

## スコープ（Scope）

### ユーザーストーリー

- 開発者として、プロジェクトに関係ないドメインスキル・エージェント・リファレンスが読み込まれないようにしたい。なぜなら、無関係なコンテキストがノイズになり作業効率が下がるから。
- 開発者として、プロジェクト固有の設定を `~/.claude/` に配置したい。なぜなら、プロジェクトリポジトリにAI関連ファイルの配置を禁止するルールがあるから。
- 開発者として、同じ日に複数プロジェクトを行き来する際に手動切り替えなしで適切な設定が適用されてほしい。なぜなら、都度の切り替えは面倒でミスの原因になるから。
- 開発者として、CLAUDE.md の共通部分はプロジェクト間で共有しつつ、プロジェクト固有設定は別管理したい。なぜなら、共通ワークフローの改善を全プロジェクトに一括反映できるから。

### 対象領域

- Forge のディレクトリ構造（skills/, agents/, reference/ の分類）
- CLAUDE.md の構造（共通部分とプロジェクト固有部分の分離）
- インストーラー（install.sh）のプロジェクト対応
- `~/.claude/` 配下のプロジェクト別ディレクトリ構造

### 分離の基準

| 共通（グローバル） | プロジェクト固有 |
|---|---|
| コマンド（brainstorm, spec, implement 等） | ドメインスキル（prisma-expert, terraform-gcp-expert 等） |
| 方法論スキル（TDD, systematic-debugging 等） | 技術特化エージェント（prisma-guardian, terraform-reviewer 等） |
| ワークフロー（OpenSpec） | reference/ の技術規約（nextjs/, prisma/, terraform/） |
| フック（console.log検出, git pushゲート等） | CLAUDE.md のプロジェクト固有セクション（Available Agents/Skills/Reference の技術固有項目） |
| core-essentials.md | |
| CLAUDE.md の共通セクション（ワークフロー、コマンド一覧等） | |

## スコープ外（Out of Scope）

- BigQuery/ETL用のスキル・エージェント・リファレンスの作成: 仕組みだけ作る。中身は別変更で対応 -- YAGNI
- プロファイル管理UI/CLIコマンド: 設定ファイルの手動編集で十分 -- YAGNI
- 複数プロファイルのマージ・継承機構: 共通 + プロジェクト固有の2層で十分 -- YAGNI
- フックのプロジェクト別切り替え: 現状のフックは全プロジェクトで有用 -- YAGNI

## 未解決の疑問点（Open Questions）

- Claude Code の `~/.claude/projects/` 機構がスキル・エージェントの自動読み込みに対応しているか、技術調査が必要
- CLAUDE.md の分離方法（別ファイルからのインクルード的な仕組みが使えるか、それとも生成方式か）
- 既存の install.sh をどこまで改修するか（プロジェクト登録のワークフロー）
